@model System.Web.Mvc.HandleErrorInfo
@using Kamsyk.Reget.Controllers.RegetExceptions;
@using Resources;

@{ 
    Response.StatusCode = (int)HttpStatusCode.InternalServerError;
    //var homeController = ViewContext.Controller as HomeController;
}

<div style="background-color:#fff!important;">
    <div class="navbar-header reget-navbar-top" style="width:100%;border-top-color:#ff0000;padding-bottom:8px;padding-left:20px;">
        <a href="~/Home/Index" style="text-decoration:none;" class="reget-display-loader" onclick="ShowLoader();">
            <div class="reget-logo reget-display-loader">
                <span class="reget-logo-text">Reget</span>
            </div>
        </a>
        @*<a href="~/Home/Index" class="reget-display-loader" onclick="ShowLoader();">
        <img src="~/Content/Images/Reget.png" style="float:left;padding-left:25px;padding-right:25px;padding-top:8px" />
        <span class="reget-logo-text">Reget</span></a>*@
    </div>

    <div style="clear:both"></div>

    <div style="padding-top:50px;padding-bottom:50px;padding-left:25px;padding-right:25px;background-color:#fff!important;">
        <img id="errImg" src="~/Content/Images/Error.png" style="float:left;padding-top:10px;padding-right:25px;width:110px;height:110px;" width="95" />
        <div style="float:left">
            <div>
                <h2>@RequestResource.Error</h2>
                @{
                    ViewBag.IsError = true;
                    if (ViewBag.Exception != null && ViewBag.Exception is ExNotAuthorizedUser) {
                        <div id="h2NotAllowedUser">@String.Format(RequestResource.NotAllowedUser, HttpContext.Current.User.Identity.Name)</div>
                    } else if (ViewBag.Exception != null && ViewBag.Exception is ExNotAuthorizedUserPage) {
                        <div id="h2NotAllowedPage">@RequestResource.NotAuthorizedDisplayPage</div>
                    } else if (ViewBag.Exception != null && ViewBag.Exception is ExTestModeProdDb) {
                        <div id="h2TestModeProdDb">Check whether you are in Test Mode and try to run app with Productive DB</div>
                    } else {
                        <div id="h2NotAllowedPage">@RequestResource.Error</div>
                        @*if (ViewBag.IsDebug != null && ViewBag.IsDebug && @ViewBag.Exception != null) {
                            <div>@ViewBag.Exception.ToString()</div>
                            Exception ex = Server.GetLastError();
                        }*@
                    }
                }
                <p>@RequestResource.ContactAdminForSupport</p>
            </div>
        </div>
        <div style="clear:both"></div>
    </div>
        
    <hr />

    <div style="padding:25px;;background-color:#fff!important;">
        @RequestResource.ApplicationAdministrators: <b>Kamil Sykora</b>, @RequestResource.Phone: <b>+420 724 228 239</b>, eMail: <a href="mailto:kamil.sykora@otis.com"><b>kamil.sykora@otis.com</b></a>
    </div>
</div>
